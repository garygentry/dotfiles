<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 650 970" width="650" height="970">
  <title>Installation Flow - dotfiles install Command</title>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#4A5568"/>
    </marker>
  </defs>
  <style>
    .box { rx: 6; stroke-width: 2; fill: #DBEAFE; stroke: #3B82F6; }
    .label {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      font-size: 13px;
      fill: #1F2937;
      text-anchor: middle;
      dominant-baseline: middle;
    }
    .label-small {
      font-size: 11px;
      fill: #6B7280;
      font-style: italic;
    }
    .connector { stroke: #4A5568; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
  </style>

  <!-- Step 1 -->
  <rect class="box" x="100" y="30" width="450" height="60"/>
  <text class="label" x="325" y="60">dotfiles install</text>
  <line class="connector" x1="325" y1="90" x2="325" y2="120"/>

  <!-- Step 2 -->
  <rect class="box" x="100" y="120" width="450" height="60"/>
  <text class="label" x="325" y="150">Parse CLI flags</text>
  <line class="connector" x1="325" y1="180" x2="325" y2="210"/>

  <!-- Step 3 -->
  <rect class="box" x="100" y="210" width="450" height="60"/>
  <text class="label" x="325" y="232">Detect system</text>
  <text class="label label-small" x="325" y="250">sysinfo.Detect()</text>
  <line class="connector" x1="325" y1="270" x2="325" y2="300"/>

  <!-- Step 4 -->
  <rect class="box" x="100" y="300" width="450" height="60"/>
  <text class="label" x="325" y="322">Load configuration</text>
  <text class="label label-small" x="325" y="340">config.Load()</text>
  <line class="connector" x1="325" y1="360" x2="325" y2="390"/>

  <!-- Step 5 -->
  <rect class="box" x="100" y="390" width="450" height="60"/>
  <text class="label" x="325" y="412">Authenticate secrets</text>
  <text class="label label-small" x="325" y="430">secrets.Provider.Authenticate()</text>
  <line class="connector" x1="325" y1="450" x2="325" y2="480"/>

  <!-- Step 6 -->
  <rect class="box" x="100" y="480" width="450" height="60"/>
  <text class="label" x="325" y="502">Discover modules</text>
  <text class="label label-small" x="325" y="520">module.DiscoverModules()</text>
  <line class="connector" x1="325" y1="540" x2="325" y2="570"/>

  <!-- Step 7 -->
  <rect class="box" x="100" y="570" width="450" height="60"/>
  <text class="label" x="325" y="592">Resolve dependencies</text>
  <text class="label label-small" x="325" y="610">module.ResolveModules()</text>
  <line class="connector" x1="325" y1="630" x2="325" y2="660"/>

  <!-- Step 8 -->
  <rect class="box" x="100" y="660" width="450" height="60"/>
  <text class="label" x="325" y="682">Display plan</text>
  <text class="label label-small" x="325" y="700">ui.ShowExecutionPlan()</text>
  <line class="connector" x1="325" y1="720" x2="325" y2="750"/>

  <!-- Step 9 -->
  <rect class="box" x="100" y="750" width="450" height="60"/>
  <text class="label" x="325" y="772">Execute modules loop</text>
  <text class="label label-small" x="325" y="790">runner.RunModule()</text>
  <line class="connector" x1="325" y1="810" x2="325" y2="840"/>

  <!-- Step 10 -->
  <rect class="box" x="100" y="840" width="450" height="60"/>
  <text class="label" x="325" y="862">Show summary</text>
  <text class="label label-small" x="325" y="880">ui.ShowSummary()</text>
</svg>
