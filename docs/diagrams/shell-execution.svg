<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 350" width="800" height="350">
  <title>Shell Script Execution - Go Runner Prepares and Module Script Runs With</title>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#4A5568"/>
    </marker>
  </defs>
  <style>
    .box-go { rx: 6; stroke-width: 2; fill: #E9D5FF; stroke: #9333EA; }
    .box-shell { rx: 6; stroke-width: 2; fill: #FED7AA; stroke: #EA580C; }
    .group-bg { fill: #F9FAFB; stroke: #E5E7EB; stroke-width: 1; rx: 8; }
    .label {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      font-size: 13px;
      fill: #1F2937;
      text-anchor: middle;
      dominant-baseline: middle;
    }
    .label-group {
      font-size: 11px;
      font-weight: 600;
      fill: #6B7280;
      text-anchor: start;
    }
    .label-small {
      font-size: 11px;
      fill: #6B7280;
      font-style: italic;
    }
    .connector { stroke: #4A5568; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
  </style>

  <!-- Go Runner Prepares Group -->
  <rect class="group-bg" x="30" y="30" width="340" height="290"/>
  <text class="label-group" x="40" y="50">GO RUNNER PREPARES</text>

  <rect class="box-go" x="50" y="80" width="300" height="80"/>
  <text class="label" x="200" y="105">Set DOTFILES_* env vars</text>
  <text class="label label-small" x="200" y="125">OS, arch, package manager,</text>
  <text class="label label-small" x="200" y="143">paths, user config, prompts</text>

  <rect class="box-go" x="50" y="200" width="300" height="80"/>
  <text class="label" x="200" y="235">Build wrapper script</text>
  <text class="label label-small" x="200" y="253">Source helpers + module script</text>

  <!-- Connector between groups -->
  <line class="connector" x1="370" y1="150" x2="430" y2="150"/>

  <!-- Module Script Runs With Group -->
  <rect class="group-bg" x="430" y="30" width="340" height="290"/>
  <text class="label-group" x="440" y="50">MODULE SCRIPT RUNS WITH</text>

  <rect class="box-shell" x="450" y="65" width="300" height="60"/>
  <text class="label" x="600" y="87">Helper functions</text>
  <text class="label label-small" x="600" y="105">lib/helpers.sh</text>

  <rect class="box-shell" x="450" y="145" width="300" height="60"/>
  <text class="label" x="600" y="175">DOTFILES_* env vars</text>

  <rect class="box-shell" x="450" y="225" width="300" height="60"/>
  <text class="label" x="600" y="247">Callbacks to Go CLI</text>
  <text class="label label-small" x="600" y="265">get-secret, render-template</text>
</svg>
